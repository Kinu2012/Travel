<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—…è¡Œã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</title>
    <link rel="stylesheet" href="/static/style.css">
    <!-- <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .questionnaire-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .questionnaire-header h1 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            line-height: 1.6;
        }

        .progress-section {
            margin-bottom: 30px;
        }

        .progress-text {
            text-align: center;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            width: 20%;
        }

        .question-area {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .question-area.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-text {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
        }

        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .option-row.single-row {
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        }

        .mood-option {
            position: relative;
        }

        .mood-option input {
            position: absolute;
            opacity: 0;
        }

        .mood-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            min-height: 120px;
        }

        .mood-label:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .mood-option input:checked + .mood-label {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea15, #764ba215);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .mood-emoji {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .mood-text {
            color: #333;
            font-weight: 500;
            text-align: center;
            line-height: 1.4;
        }

        .mood-text small {
            display: block;
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }

        .navigation-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .nav-btn {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .prev-btn {
            background: #e0e0e0;
            color: #666;
        }

        .prev-btn:hover:not(:disabled) {
            background: #d0d0d0;
        }

        .prev-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .next-btn, .submit-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .next-btn:hover:not(:disabled), .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .next-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .error-message {
            background: #ff4444;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
            display: none;
            animation: shake 0.5s ease;
        }

        .error-message.show {
            display: block;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            .questionnaire-header h1 {
                font-size: 1.5em;
            }

            .question-text {
                font-size: 1.2em;
            }

            .option-row {
                grid-template-columns: 1fr;
            }
        }
    </style> -->
</head>
<body>
    <div class="container">
        <div class="questionnaire-header">
            <h1>ğŸŒ ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</h1>
            <p class="subtitle">ä»Šã®æ°—åˆ†ã«åˆã‚ã›ã¦<br>è³ªå•ã«ç­”ãˆã¦ã¿ã¦å ´æ‰€ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
        </div>

        <div class="progress-section">
            <div class="progress-text" id="progress-text">è³ªå•1ï¼5</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>

        <form id="questionnaire-form" action="/proposal" method="GET">
            <!-- è³ªå•1 -->
            <div class="question-area active" data-question="1">
                <h2 class="question-text">ä»Šã®æ°—åˆ†ã¯ã©ã‚“ãªæ„Ÿã˜ï¼Ÿ</h2>
                <div class="options-grid">
                    <div class="option-row">
                        <div class="mood-option">
                            <input type="radio" id="mood1" name="mood" value="excited">
                            <label for="mood1" class="mood-label">
                                <span class="mood-emoji">ğŸ‰</span>
                                <span class="mood-text">ãƒ¯ã‚¯ãƒ¯ã‚¯ã—ã¦ã„ã‚‹</span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="mood2" name="mood" value="relaxed">
                            <label for="mood2" class="mood-label">
                                <span class="mood-emoji">ğŸ˜Œ</span>
                                <span class="mood-text">ã®ã‚“ã³ã‚Šã—ã¦ã„ã‚‹</span>
                            </label>
                        </div>
                    </div>
                    <div class="option-row">
                        <div class="mood-option">
                            <input type="radio" id="mood3" name="mood" value="adventurous">
                            <label for="mood3" class="mood-label">
                                <span class="mood-emoji">ğŸ”ï¸</span>
                                <span class="mood-text">å†’é™ºã—ãŸã„</span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="mood4" name="mood" value="chilled">
                            <label for="mood4" class="mood-label">
                                <span class="mood-emoji">ğŸµ</span>
                                <span class="mood-text">ã¾ã£ãŸã‚Šã—ãŸã„</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è³ªå•2 -->
            <div class="question-area" data-question="2">
                <h2 class="question-text">æ—…è¡Œã®ç›®çš„ã¯ä½•ã§ã™ã‹ï¼Ÿ</h2>
                <div class="options-grid">
                    <div class="option-row">
                        <div class="mood-option">
                            <input type="radio" id="purpose1" name="purpose" value="relax">
                            <label for="purpose1" class="mood-label">
                                <span class="mood-emoji">ğŸ–ï¸</span>
                                <span class="mood-text">ãƒªãƒ©ãƒƒã‚¯ã‚¹</span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="purpose2" name="purpose" value="adventure">
                            <label for="purpose2" class="mood-label">
                                <span class="mood-emoji">ğŸ§—</span>
                                <span class="mood-text">ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼</span>
                            </label>
                        </div>
                    </div>
                    <div class="option-row">
                        <div class="mood-option">
                            <input type="radio" id="purpose3" name="purpose" value="culture">
                            <label for="purpose3" class="mood-label">
                                <span class="mood-emoji">ğŸ¯</span>
                                <span class="mood-text">æ–‡åŒ–ä½“é¨“</span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="purpose4" name="purpose" value="gourmet">
                            <label for="purpose4" class="mood-label">
                                <span class="mood-emoji">ğŸ£</span>
                                <span class="mood-text">ã‚°ãƒ«ãƒ¡</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è³ªå•3 -->
            <div class="question-area" data-question="3">
                <h2 class="question-text">æ—…è¡Œã®äºˆç®—ã¯ï¼Ÿ</h2>
                <div class="options-grid">
                    <div class="option-row single-row">
                        <div class="mood-option">
                            <input type="radio" id="budget1" name="budget" value="low">
                            <label for="budget1" class="mood-label">
                                <span class="mood-emoji">ğŸ’°</span>
                                <span class="mood-text">ç¯€ç´„ã—ãŸã„<small>ï¼ˆ3ä¸‡å††ä»¥ä¸‹ï¼‰</small></span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="budget2" name="budget" value="medium">
                            <label for="budget2" class="mood-label">
                                <span class="mood-emoji">ğŸ’µ</span>
                                <span class="mood-text">æ™®é€š<small>ï¼ˆ3ã€œ8ä¸‡å††ï¼‰</small></span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="budget3" name="budget" value="high">
                            <label for="budget3" class="mood-label">
                                <span class="mood-emoji">ğŸ’</span>
                                <span class="mood-text">è´…æ²¢<small>ï¼ˆ8ä¸‡å††ä»¥ä¸Šï¼‰</small></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è³ªå•4 -->
            <div class="question-area" data-question="4">
                <h2 class="question-text">æ—…è¡ŒæœŸé–“ã¯ï¼Ÿ</h2>
                <div class="options-grid">
                    <div class="option-row single-row">
                        <div class="mood-option">
                            <input type="radio" id="duration1" name="duration" value="short">
                            <label for="duration1" class="mood-label">
                                <span class="mood-emoji">ğŸŒ…</span>
                                <span class="mood-text">æ—¥å¸°ã‚Šã€œ1æ³Š</span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="duration2" name="duration" value="medium">
                            <label for="duration2" class="mood-label">
                                <span class="mood-emoji">ğŸ¨</span>
                                <span class="mood-text">2ã€œ3æ³Š</span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="duration3" name="duration" value="long">
                            <label for="duration3" class="mood-label">
                                <span class="mood-emoji">âœˆï¸</span>
                                <span class="mood-text">4æ³Šä»¥ä¸Š</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è³ªå•5 -->
            <div class="question-area" data-question="5">
                <h2 class="question-text">åŒè¡Œè€…ã¯ï¼Ÿ</h2>
                <div class="options-grid">
                    <div class="option-row single-row">
                        <div class="mood-option">
                            <input type="radio" id="companion1" name="companion" value="solo">
                            <label for="companion1" class="mood-label">
                                <span class="mood-emoji">ğŸ™‹</span>
                                <span class="mood-text">ä¸€äººæ—…</span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="companion2" name="companion" value="couple">
                            <label for="companion2" class="mood-label">
                                <span class="mood-emoji">ğŸ‘«</span>
                                <span class="mood-text">ã‚«ãƒƒãƒ—ãƒ«</span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="companion3" name="companion" value="family">
                            <label for="companion3" class="mood-label">
                                <span class="mood-emoji">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
                                <span class="mood-text">å®¶æ—</span>
                            </label>
                        </div>
                        <div class="mood-option">
                            <input type="radio" id="companion4" name="companion" value="friends">
                            <label for="companion4" class="mood-label">
                                <span class="mood-emoji">ğŸ‘¥</span>
                                <span class="mood-text">å‹äºº</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="error-message" id="error-message">
                é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„ï¼
            </div>

            <div class="navigation-buttons">
                <button type="button" class="nav-btn prev-btn" id="prev-btn" disabled>
                    <span>â†</span> å‰ã¸
                </button>
                <button type="button" class="nav-btn next-btn" id="next-btn">
                    æ¬¡ã¸ <span>â†’</span>
                </button>
                <button type="submit" class="nav-btn submit-btn" id="submit-btn" style="display: none;">
                    ãƒ—ãƒ©ãƒ³ã‚’ææ¡ˆã™ã‚‹ <span>âœ¨</span>
                </button>
            </div>
        </form>
    </div>

    <script>
        (function() {
            'use strict';

            const elements = {
                questions: document.querySelectorAll('.question-area'),
                progressText: document.getElementById('progress-text'),
                progressFill: document.getElementById('progress-fill'),
                nextBtn: document.getElementById('next-btn'),
                prevBtn: document.getElementById('prev-btn'),
                submitBtn: document.getElementById('submit-btn'),
                errorMessage: document.getElementById('error-message')
            };

            let currentQuestion = 0;
            const totalQuestions = elements.questions.length;

            function init() {
                elements.nextBtn.addEventListener('click', handleNext);
                elements.prevBtn.addEventListener('click', handlePrev);

                document.querySelectorAll('.mood-option input').forEach(radio => {
                    radio.addEventListener('change', updateNavigation);
                });

                showQuestion(0);
            }

            function showQuestion(index) {
                elements.questions.forEach((q, i) => {
                    q.classList.toggle('active', i === index);
                });

                const progressPercent = ((index + 1) / totalQuestions) * 100;
                elements.progressText.textContent = `è³ªå•${index + 1}ï¼${totalQuestions}`;
                elements.progressFill.style.width = `${progressPercent}%`;

                updateNavigation();
                hideError();
            }

            function updateNavigation() {
                const currentQuestionElement = elements.questions[currentQuestion];
                const isAnswered = currentQuestionElement.querySelector('input:checked');

                elements.prevBtn.disabled = currentQuestion === 0;

                if (currentQuestion === totalQuestions - 1) {
                    elements.nextBtn.style.display = 'none';
                    elements.submitBtn.style.display = isAnswered ? 'flex' : 'none';
                } else {
                    elements.nextBtn.style.display = 'flex';
                    elements.submitBtn.style.display = 'none';
                    elements.nextBtn.disabled = !isAnswered;
                }
            }

            function handleNext() {
                const currentQuestionElement = elements.questions[currentQuestion];
                const isAnswered = currentQuestionElement.querySelector('input:checked');

                if (!isAnswered) {
                    showError();
                    return;
                }

                if (currentQuestion < totalQuestions - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            }

            function handlePrev() {
                if (currentQuestion > 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            }

            function showError() {
                elements.errorMessage.classList.add('show');
                setTimeout(hideError, 3000);
            }

            function hideError() {
                elements.errorMessage.classList.remove('show');
            }

            init();
        })();
    </script>
</body>
</html>